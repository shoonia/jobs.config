(window.J=window.J||[]).push([[315],{710:(e,t,a)=>{a.r(t),a.d(t,{BuilderPage:()=>$});var n=a(396),r=a(971),i="oa",o="va",s="Ba Aa",l="Ea Ba Aa",c=a(235),d=a(584);const u=({key:e,target:t})=>{"Enter"!==e&&" "!==e||t.firstChild.click()},m=({name:e,value:t,period:a})=>{const n=t===a;return(0,d.BX)("label",{className:"ya",tabIndex:n?-1:0,onKeyPress:u,children:[(0,d.tZ)("input",{type:"radio",name:e,checked:n,"data-name":"period",value:t,className:"ua"}),(0,d.tZ)("span",{className:"ta",children:t})]})};var h=a(661),p=a(225);const Z=(0,h.kr)((0,p.CC)()),v=()=>(0,h.qp)(Z),N=()=>{const{id:e,period:t}=v();return(0,d.tZ)("fieldset",{className:i,children:(0,d.BX)("div",{className:"wa",children:[(0,d.tZ)(m,{name:e,value:c.aI.DAILY,period:t}),(0,d.tZ)(m,{name:e,value:c.aI.WEEKLY,period:t}),(0,d.tZ)(m,{name:e,value:c.aI.MONTHLY,period:t}),(0,d.tZ)(m,{name:e,value:c.aI.CRON,period:t})]})})},b=({remove:e,clone:t,isMax:a})=>(0,d.BX)("div",{className:"pa",children:[(0,d.tZ)("button",{type:"button","aria-label":"remove",onClick:e,className:"ra qa","data-rh":"Remove","data-rh-at":"top"}),(0,d.tZ)("button",{type:"button","aria-label":"clone",onClick:t,className:"sa qa","data-rh":"Clone","data-rh-at":"top",disabled:a})]}),f=({top:e,children:t})=>(0,d.BX)("label",{className:"xa",children:[(0,d.tZ)("span",{className:"za",children:e}),t]}),y=()=>{const{functionLocation:e,functionName:t,description:a}=v();return(0,d.BX)("fieldset",{className:i,children:[(0,d.BX)("div",{className:o,children:[(0,d.tZ)(f,{top:"Function Location",children:(0,d.tZ)("input",{type:"text","data-name":c.tW.functionLocation,"data-fl":!0,"data-fl-at":"bottom",className:s,value:e,placeholder:"Function Location",pattern:"^(\\/)?[\\w\\-\\.\\/]*[\\w-]\\.jsw?$",spellcheck:!1,required:!0})}),(0,d.tZ)("span",{className:"Da",children:"/"}),(0,d.tZ)(f,{top:"Function Name",children:(0,d.tZ)("input",{type:"text","data-name":c.tW.functionName,"data-fl":!0,"data-fl-at":"bottom",className:s,value:t,placeholder:"Function Name",pattern:"^(\\s)*?[\\$a-zA-Z_][\\$\\w]*(\\s)*?$",spellcheck:!1,required:!0})})]}),(0,d.tZ)("div",{className:o,children:(0,d.tZ)(f,{top:"Description",children:(0,d.tZ)("input",{type:"text",value:a,className:"Ca Aa","data-name":c.tW.description,placeholder:"Description"})})})]})};var g=a(337);const w=({value:e,setValidity:t})=>{const[a,r]=(0,g.G)(e);return(0,n.d4)((()=>{t(a)}),[a]),r},k=({value:e,error:t})=>{const a=(0,n.sO)(null);return(0,n.d4)((()=>{var e;null==(e=a.current)||e.setCustomValidity(t?"error":"")}),[t]),(0,d.tZ)(f,{top:"A valid cron expression",children:(0,d.tZ)("input",{ref:a,type:"text",className:l,value:e,"data-name":c.tW.cronExpression,spellcheck:!1,required:!0})})},x=()=>{const{time:e}=v();return(0,d.tZ)(f,{top:"The time of day the job runs.",children:(0,d.tZ)("input",{type:"time",value:e,"data-name":"time",className:l,required:!0})})},C=()=>{const{id:e}=v();return(0,d.tZ)(f,{top:"Cron Examples",children:(0,d.tZ)("button",{type:"button",className:"Oa","aria-haspopup":"true","aria-label":"Show examples","data-fl":!0,"data-fl-at":"right","data-name":c.tW.cronExpression,"data-id":e,children:(0,d.tZ)("svg",{width:"18",height:"18",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,d.tZ)("path",{d:"M6 12.5c0-.828.666-1.5 1.5-1.5.828 0 1.5.666 1.5 1.5 0 .828-.666 1.5-1.5 1.5-.828 0-1.5-.666-1.5-1.5zm5 0c0-.828.666-1.5 1.5-1.5.828 0 1.5.666 1.5 1.5 0 .828-.666 1.5-1.5 1.5-.828 0-1.5-.666-1.5-1.5zm5 0c0-.828.666-1.5 1.5-1.5.828 0 1.5.666 1.5 1.5 0 .828-.666 1.5-1.5 1.5-.828 0-1.5-.666-1.5-1.5z"})})})})},I=a(744).N.map((e=>(0,d.tZ)("option",{value:e,children:e},e))),B=()=>{const{dayOfWeek:e}=v();return(0,d.tZ)(f,{top:"The day of the week the job runs.",children:(0,d.tZ)("select",{className:s,"data-name":c.tW.dayOfWeek,value:e,children:I})})},S=()=>{const{dateInMonth:e}=v();return(0,d.tZ)(f,{top:"The day of the month the job runs.",children:(0,d.tZ)("input",{type:"number",min:"1",max:"31",step:"1",value:String(e),"data-name":c.tW.dateInMonth,className:l,required:!0})})};var j=a(309);const E=()=>{const[e,t]=(0,n.eJ)(!1),{period:a,cronExpression:r}=v(),s=a===c.aI.CRON,l=s?(0,d.tZ)(k,{value:r,error:e}):(0,d.tZ)(x,{}),u=s&&(0,d.tZ)(C,{}),m=s&&(0,d.tZ)("div",{className:(0,j.AK)(["Fa",e&&"Ga"]),children:w({value:r,setValidity:t})}),h=a===c.aI.WEEKLY&&(0,d.tZ)(B,{}),p=a===c.aI.MONTHLY&&(0,d.tZ)(S,{});return(0,d.BX)("fieldset",{className:i,children:[(0,d.BX)("div",{className:o,children:[l,(0,d.tZ)("span",{className:"Da"}),u,h,p]}),m]})},M=({data:e,remove:t,clone:a,update:n,isMax:r})=>(0,d.tZ)(Z.Provider,{value:e,children:(0,d.tZ)("li",{children:(0,d.BX)("form",{id:e.id,action:"#",className:"na",onInput:n,onSubmit:j.PF,children:[(0,d.tZ)(y,{}),(0,d.tZ)(N,{}),(0,d.tZ)(E,{}),(0,d.tZ)(b,{remove:t,clone:a,isMax:r})]})})}),A=()=>{const{dispatch:e,items:t,isMax:a}=(0,r.bI)("items","isMax"),i=(0,n.I4)((({target:t})=>{e("items/remove",t.form.id)}),[]),o=(0,n.I4)((({target:t})=>{e("items/clone",t.form.id)}),[]),s=(0,n.I4)((({target:t})=>{e("items/update",{id:t.form.id,name:t.dataset.name,value:t.value})}),[]),l=t.map((e=>(0,d.tZ)(M,{data:e,remove:i,clone:o,update:s,isMax:a},e.id)));return(0,d.tZ)("ul",{className:"ma",children:l})};var X=a(717);const W=()=>(0,d.tZ)("svg",{width:"24",height:"24",fill:"currentColor","aria-hidden":"true",children:(0,d.tZ)("path",{d:"M12 12V6h-1v6H5v1h6v6h1v-6h6v-1z"})}),q=()=>{const{dispatch:e,isMax:t}=(0,r.bI)("isMax");return(0,d.tZ)("div",{className:"U",children:(0,d.tZ)("span",{"data-rh":"You can configure up to 20 jobs.",className:"V",children:(0,d.BX)(X.z,{onClick:()=>{e("items/new")},disabled:t,children:[(0,d.tZ)(W,{})," New Job"]})})})},z=()=>(0,d.BX)(d.HY,{children:[(0,d.tZ)(q,{}),(0,d.tZ)(A,{})]}),O=({left:e,right:t})=>(0,d.BX)("div",{className:"M",children:[(0,d.tZ)("div",{className:"O N",children:e}),(0,d.tZ)("div",{className:"P N",children:t})]});var D=a(529);const F=[{regex:/^[\s[\]{}:,]+/},{regex:/^-?\d+(?:\.\d+)?(?:e[+-]?\d+)?/i,className:D.Z.mtk5},{regex:/^"(?:\\.|[^"\\])*"/,className:D.Z.mtk6}],L=({input:e})=>{const t=[];let a;do{a=!1;for(let n=0;n<F.length;n++){const r=F[n],i=r.regex.exec(e);if(Array.isArray(i)){const[n]=i,o="className"in r?(0,d.tZ)("span",{className:r.className,children:n}):n;t.push(o),e=e.substring(n.length),a=!0;break}}}while(e.length>0&&a);return(0,d.tZ)("code",{children:t})},R=({label:e,jsonString:t})=>"function"===typeof window.showSaveFilePicker?(0,d.tZ)("button",{type:"button",className:"Ia",onClick:()=>{(async e=>{const t=await window.showSaveFilePicker({suggestedName:"jobs.config",types:[{description:"Jobs Config",accept:{"application/json":[".config"]}}]});if("granted"===await t.queryPermission()){const a=await t.createWritable();await a.write(e),await a.close()}})(t)},"aria-label":e}):(0,d.tZ)("a",{href:`data:application/json,${encodeURIComponent(t)}`,className:"Ia",download:"jobs.config",type:"application/json","aria-label":e}),V=()=>{const{items:e}=(0,r.bI)("items"),t=(0,n.sO)(null),a=(0,p._g)(e);return(0,d.BX)("div",{className:"Q",children:[(0,d.tZ)("div",{className:"S",children:(0,d.tZ)(X.z,{onClick:()=>{const e=window.getSelection(),a=document.createRange();(0,j.Re)(t.current)&&(a.selectNodeContents(t.current),e.removeAllRanges(),e.addRange(a),document.execCommand("copy"))},children:"Copy Code"})}),(0,d.tZ)("pre",{ref:t,className:"R",children:(0,d.tZ)(L,{input:a})}),(0,d.tZ)("div",{className:"T","data-rh":"Download a file","data-rh-at":"left",children:(0,d.tZ)(R,{label:"Download a file",jsonString:a})})]})},$=()=>(0,d.tZ)(O,{left:(0,d.tZ)(z,{}),right:(0,d.tZ)(V,{})})},717:(e,t,a)=>{a.d(t,{z:()=>i});var n=a(309),r=a(584);const i=({onClick:e,children:t,className:a,...i})=>{const o=(0,n.AK)(["Ha",a]);return(0,r.tZ)("button",{type:"button",onClick:e,className:o,...i,children:t})}},337:(e,t,a)=>{a.d(t,{G:()=>s});var n=a(502),r=a(458);const i=/^every (\d+ )?(second|minute)s?\b/i,o=e=>[!0,e],s=e=>{try{const t=(0,r.toString)(e,{use24HourTimeFormat:!0});return i.test(t)?o(`${t}\n\nError: You can schedule your job to run at intervals as short as one hour apart, but not shorter. If you define your job to run more frequently, the job will be ignored.`):e.includes("?")?o(`${t}.\n\nError: Velo Job Scheduler does not support the blank syntax with (?) symbol.`):e.includes("#")?o(`${t}.\n\nError: Velo Job Scheduler does not support the hash (#) symbol.`):(0,n.isValidCron)(e,{seconds:!1,allowBlankDay:!1,allowSevenAsSunday:!0,alias:!0})?[!1,t]:o(`${t}.\n\nError: Velo Job Scheduler does not support this syntax.`)}catch(e){return o(String(e))}}},529:(e,t)=>{t.Z={mtk1:"y",mtk4:"z",mtk3:"A",mtk5:"B",mtk6:"C",mtk10:"D",err:"E"}}}]);