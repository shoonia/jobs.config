(window.jobsConfig=window.jobsConfig||[]).push([[842],{717:(n,e,t)=>{t.d(e,{z:()=>r});var o=t(400);const r=({onClick:n,disabled:e,children:t,type:r="button"})=>(0,o.h)("button",{type:r,onClick:n,className:"ga fa",disabled:e},t)},798:(n,e,t)=>{t.d(e,{j:()=>l});var o=t(400),r=t(661);const i=(0,r.Vo)((()=>t.e(861).then(t.bind(t,554)).then((n=>({default:n.CronTrue}))))),l=n=>(0,o.h)(r.n4,{fallback:null},i(n))},876:(n,e,t)=>{t.r(e),t.d(e,{Parser:()=>w});var o=t(400),r=t(409),i=t.n(r),l=t(97),u=t.n(l),s=t(502),a=t(798);const c=({index:n,name:e,expected:t})=>(0,o.h)("p",null,`Incorrect type of property "${e}" at "jobs[${n}]". Expected "${t}".`);var h=t(744),p=t(791),f=t(309),d=t(235);const b=[d.tW.functionLocation,d.tW.functionName,d.tW.executionConfig],j=[...b,d.tW.description],m=[d.tW.dayOfWeek,d.tW.dateInMonth],x=[d.tW.time,...m],g=[d.tW.cronExpression,...x],y=n=>[!0,n],W=(n,e)=>{for(const t of Object.keys(n))if(!e.includes(t))return[!0,t];return[!1]},v=(n,e)=>{for(const t of e)if(!(t in n))return[!0,t];return[!1]},$=n=>{const e='", "';if(!(0,f.Kn)(n))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,'Incorrect type. Expected "object".'),(0,o.h)("p",null,"The jobs.config file must contains a JSON object.")));if(!(d.tW.jobs in n))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,'Missing property "jobs".'),(0,o.h)("p",null,'The jobs object must contains one top-level key named "jobs".')));const t=Object.keys(n);if(t.length>1){const n=t.filter((n=>n!==d.tW.jobs)).join(e);return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Unknown property "${n}".`),(0,o.h)("p",null,'The jobs object must contains one top-level key named "jobs".')))}if(!Array.isArray(n.jobs))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,'Incorrect type. Expected "array".'),(0,o.h)("p",null,'The top-level key "jobs" must be an array.')));const r=n.jobs;let i=r.length;if(i>20)return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Too many scheduled jobs. (${i})`),(0,o.h)("p",null,"You can configure up to 20 jobs.")));if(i<1)return y((0,o.h)("p",null,"No scheduled jobs."));if(!r.every(f.Kn))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,'Incorrect type. Expected "object."'),(0,o.h)("p",null,'The "jobs" array must contain only objects, each of which represents a scheduled job.')));for(;0<i--;){const n=r[i],[t,l]=W(n,j);if(t)return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Unknown property "${l}" at "jobs[${i}]".`),(0,o.h)("p",null,`Allowed one of "${j.join(e)}"`)));const[u,$]=v(n,b);if(u)return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Missing property "${$}" at "jobs[${i}]"`),(0,o.h)("p",null,`Each scheduled job object must contain the required fields "${b.join(e)}".`)));if(d.tW.description in n&&!(0,f.HD)(n.description))return y((0,o.h)(c,{index:i,name:d.tW.description,expected:"string"}));const C=n.functionLocation;if(!(0,f.HD)(C))return y((0,o.h)(c,{index:i,name:d.tW.functionLocation,expected:"string"}));if(!(0,p.QL)(C))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Invalid "functionLocation" at "jobs[${i}]".`),(0,o.h)("p",null,"The function location is a relative path within the Backend folder for ",(0,o.h)("code",null,".js")," or ",(0,o.h)("code",null,".jsw")," file."),(0,o.h)("p",null,"File and Folder names can contain only alphanumeric characters, periods, hyphens and underscores, and can not begin or end with a period.")));const H=n.functionName;if(!(0,f.HD)(H))return y((0,o.h)(c,{index:i,name:d.tW.functionName,expected:"string"}));if(!(0,p.c3)(H))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Invalid "functionName" at "jobs[${i}]"`),(0,o.h)("p",null,`Error: "${H}".`)));const E=n.executionConfig;if(!(0,f.Kn)(E))return y((0,o.h)(c,{index:i,name:d.tW.executionConfig,expected:"object"}));const[k,I]=W(E,g);if(k)return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Unknown property "${I}" in "jobs[${i}].executionConfig".`),(0,o.h)("p",null,`Allowed one of "${g.join(e)}"`)));if(d.tW.cronExpression in E){const n=E.cronExpression;if(!(0,f.HD)(n))return y((0,o.h)(c,{index:i,name:d.tW.cronExpression,expected:"string"}));if(!(0,s.isValidCron)(n))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Invalid "cronExpression" at "jobs[${i}].executionConfig".`),(0,o.h)("p",null,(0,o.h)(a.j,{value:n,setValidity:()=>{}})),(0,o.h)("p",null,(0,o.h)("em",null,"You can schedule your job to run at intervals as short as one hour apart, but not shorter. If you define your job to run more frequently, the job will be ignored."))))}else{if(!(d.tW.time in E))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Missing the time of the job runs at "jobs[${i}].executionConfig".`),(0,o.h)("p",null,'The "executionConfig" object must contain one of "time", "cronExpression" properties.')));{const n=E.time;if(!(0,f.HD)(n))return y((0,o.h)(c,{index:i,name:d.tW.time,expected:"string"}));if(!(0,p.CO)(n))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Invalid "time" at "jobs[${i}].executionConfig".`),(0,o.h)("p",null,`Error: "${n}". The time is specified as UTC time in HH:MM format.`)))}}if(d.tW.dayOfWeek in E){const n=E.dayOfWeek;if(!(0,f.HD)(n))return y((0,o.h)(c,{index:i,name:d.tW.dayOfWeek,expected:"string"}));if(!h.N.some((e=>e===n)))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Incorrect value of "dayOfWeek" at "jobs[${i}].executionConfig".`),(0,o.h)("p",null,`Error: unknown value "${n}". Allowed one of "${h.N.join(e)}"`)))}if(d.tW.dateInMonth in E){const n=E.dateInMonth;if(!(0,f.hj)(n))return y((0,o.h)(c,{index:i,name:d.tW.dateInMonth,expected:"number"}));if(!Number.isInteger(n)||n<1||n>31)return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Invalid "dateInMonth" at "jobs[${i}].executionConfig".`),(0,o.h)("p",null,'The value of the "dateInMonth" property must be a number between 1 and 31.')))}if(d.tW.cronExpression in E&&x.some((n=>n in E)))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Mutual exclusion property at "jobs[${i}].executionConfig".`),(0,o.h)("p",null,`Error: "cronExpression" omit all of "${x.join(e)}" properties.`),(0,o.h)("p",null,(0,o.h)("em",null,'When using a cron expression to specify when a job runs, the "executionConfig" object contains a single property, named "cronExpression", whose value is a valid cron expression.'))));if(m.every((n=>n in E)))return y((0,o.h)(o.HY,null,(0,o.h)("p",null,`Mutual exclusion property at "jobs[${i}].executionConfig".`),(0,o.h)("p",null,'Error: "dateInMonth" omit the "dayOfWeek" property.')))}return[!1]},C=()=>(0,o.h)("a",{className:"Ga",href:"https://github.com/shoonia/jobs.config/issues",target:"_blank",rel:"noreferrer","aria-label":"Report issue","data-rh":"Report issue"},(0,o.h)("svg",{width:"16",height:"16","aria-hidden":"true",fill:"currentColor"},(0,o.h)("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zm-.25-6.25a.75.75 0 00-1.5 0v3.5a.75.75 0 001.5 0v-3.5z"}))),H=({children:n,error:e=!1})=>(0,o.h)("div",{className:"Ba"},(0,o.h)("pre",{className:e?"Da Ca":"Ea Ca"},n),(0,o.h)("div",{className:"Fa"},(0,o.h)(C,null)));var E=t(971),k=t(717),I=t(225);const Y=({config:n})=>{const{dispatch:e}=(0,E.bI)();return(0,o.h)(k.z,{onClick:()=>{e("items/replace",(0,I.Ze)(n)),location.hash=d.Yj.BUILDER}},"Edit Config")},w=({value:n})=>{if(""===n.trim())return(0,o.h)(H,null,"No input");if(n.length>15e3)return(0,o.h)(H,{error:!0},"The file size is too large for the jobs.config.");const[e,t]=(n=>{try{const e=i()(n);return[null,u()(e)]}catch(n){return[String(n)]}})(n);if(null!==e)return(0,o.h)(H,{error:!0},e);const[r,l]=$(t);return r?(0,o.h)(H,{error:!0},l):(0,o.h)(H,null,(0,o.h)("p",null,"Valid jobs.config"),(0,o.h)(Y,{config:t}))}},758:()=>{}}]);